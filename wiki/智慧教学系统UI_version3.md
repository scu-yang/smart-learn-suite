# **数学个性化学习与评估系统 - 开发需求文档**

## **版本与修订历史**
* **版本:** 1.1 (优化版)
* **日期:** 2025年7月20日
* **状态:** 修订稿

## **1. 引言**
本文档旨在为"数学个性化学习与评估系统"的开发团队（包括UI设计师、前端工程师、后端工程师）提供一份全面、清晰、可执行的技术与功能需求说明。文档的目标是统一团队对产品需求的理解，明确各模块的实现细节和优先级，作为后续设计、开发、测试工作的核心依据。

### **1.1. 核心术语**
为保证沟通一致性，本文档将统一使用以下术语：
* **考试 (Exam):** 在本系统中，特指由教师发布、带有明确知识点考察目的的**作业**或**练习**。它不同于传统意义上的期末大考，而是学习过程中的常规性评估。
* **知识点 (Knowledge Point):** 课程内容中的最小知识单元，是我们平时指的章节中的**节**，是题目、资源、考试和学情分析关联的基础。
* **资源 (Resource):** 指课程章节下的任何教学材料，包括文档 (PDF/DOCX)、视频 (MP4)、外部链接和LaTeX格式的题目。
* **题目 (Question):** 数学练习题，包含题干、答案、解析等信息，可以是选择题、填空题、计算题、证明题等多种题型。
* **批改 (Grading):** 对学生提交的作业答案进行评分和反馈的过程，包括AI自动批改和人工审核两个环节。
* **学情分析 (Learning Analytics):** 基于学生学习数据的统计分析，用于评估学习效果和指导教学决策。

### **1.2. 用户角色定义**
系统包含以下五种用户角色，本质上归为三类核心角色及其权限子集：
* **教学层 (Teaching Layer):**
    * **教师 (Teacher):** 拥有课程的最高管理权限，可创建/管理课程、班级、资源、考试，并对助教进行授权。
    * **助教 (Teaching Assistant / TA):** 权限受限的教师，由主讲教师在特定班级中授权。主要职责是辅助教学、管理学生、批改作业等。
* **学习层 (Learning Layer):**
    * **学生 (Student):** 系统的核心用户，参与课程学习、完成考试、查看学情报告。
* **管理层 (Administration Layer):**
    * **系统管理员 (System Admin):** 拥有最高系统权限，负责管理所有用户、课程、系统配置和监控。
    * **学校管理员 (School Admin):** 权限受限的系统管理员，专注于校级层面的用户和课程管理、数据统计与报表生成。

**关键设定：** 任何教学层或管理层用户均可切换至"学生"角色，以学习者身份体验课程内容。

### **1.3. 系统架构概述**
* **前端技术栈:** React 18+, TypeScript, Ant Design / Material-UI
* **后端技术栈:** Spring Boot 3.0+, Java 17+, MySQL 8.0+ / PostgreSQL 14+
* **AI服务:** 豆包API或其他数学作业批改API
* **部署环境:** Docker容器化部署，支持Kubernetes编排

---

## **第一部分：公共模块与全局布局 (优先级: 极高)**
此部分是系统运行的基础，需最优先开发。

### **1. 登录 / 注册**
* **功能描述:** 为系统提供安全的用户入口。
    > <small>*引用来源: 系统应提供用户注册和登录功能，支持学生和教师注册账号，并提供安全的登录验证机制。*</small>
    
    新用户可以根据角色（学生/教师）进行注册，已注册用户可登录。

* **用户故事:**
    * **作为新用户,** 我希望能轻松注册一个账户，以便开始使用系统。
    * **作为已注册用户,** 我希望能通过邮箱和密码快速登录系统。

* **UI/UX 规格:**
    * **布局:** 页面中央提供一个包含"登录"和"注册"两个标签页的表单容器。
    * **登录表单:** 
        * 输入框："邮箱/用户名"、"密码"
        * 包含"记住我"复选框和"忘记密码？"链接
        * 支持第三方登录（微信、QQ）
    * **注册表单:** 
        * 输入框："用户名"、"姓名"、"邮箱"、"密码"、"确认密码"、"学校"、"学号/工号"
        * 下拉框："选择您的角色"（选项：学生、教师）
        * 需包含服务条款和隐私政策的勾选框
    * **校验:** 前端应实时校验输入格式（如邮箱格式、密码强度），后端进行最终校验（如邮箱是否已注册）。
        > <small>*引用来源: 系统应在前端和后端对用户注册信息进行验证，例如...用户名是否已存在、邮箱是否已被注册...*</small>

* **后端 / API 规格:**
    * `POST /api/auth/register`: 接收注册信息，创建用户，发送验证邮件
    * `POST /api/auth/login`: 验证用户凭据，成功后返回JWT令牌及用户基本信息（ID、姓名、角色）
        > <small>*引用来源: 系统应在用户登录验证成功后，生成 JWT 令牌，并作为 API 响应返回给前端。*</small>
    * `POST /api/auth/verify-email`: 验证邮箱激活链接
    * `POST /api/auth/refresh-token`: 刷新JWT令牌
    * **技术栈:** 
        * 使用JWT进行会话管理，设置合理的过期时间（如2小时）
        * 密码需使用Bcrypt等强哈希算法进行加密存储
        * 实现登录失败次数限制和账号锁定机制
        > <small>*引用来源: 系统前端存储和管理 JWT 令牌，并在后续 API 请求中携带 JWT 令牌进行身份认证和权限校验。*</small>

### **2. 忘记密码 / 重置密码**
* **功能描述:** 允许用户在忘记密码时安全地重置密码。

* **用户故事:**
    * **作为忘记密码的用户,** 我希望能通过我的注册邮箱收到重置密码的指引，以便重新访问我的账户。

* **UI/UX 规格:**
    * **流程:**
        1. 点击"忘记密码？"链接，进入"重置密码"页面
        2. 输入注册邮箱地址，点击"发送重置链接"
        3. 页面提示"重置邮件已发送，请检查您的收件箱"
        4. 用户点击邮件中的链接，跳转至"创建新密码"页面
        5. 输入"新密码"和"确认新密码"，提交后提示成功并跳转至登录页

* **后端 / API 规格:**
    * `POST /api/auth/forgot-password`: 接收邮箱地址，生成一个带有时效性的（如30分钟）、唯一的重置令牌，并发送邮件
    * `GET /api/auth/verify-reset-token`: 验证重置令牌的有效性
    * `POST /api/auth/reset-password`: 接收重置令牌和新密码，验证令牌有效性后更新用户密码

### **3. 顶部导航栏 & 侧边导航 (全局)**
* **功能描述:** 提供一致、清晰的全局导航体验。

* **UI/UX 规格:**
    * **顶部导航栏 (固定):**
        * 左侧：系统Logo（点击返回对应角色的首页）
        * 中间：面包屑导航（显示当前页面层级路径）
        * 右侧：
            * 全局搜索框（支持搜索课程、题目、用户等）
            * 通知中心图标（带未读消息红点和数字）
            * 帮助中心图标(?)
            * 用户头像下拉菜单（包含"个人设置"、"切换角色"、"退出登录"选项）
    * **侧边导航栏 (可折叠):**
        * 根据用户登录角色动态生成菜单项
            > <small>*引用来源: 系统应实现用户角色管理功能，根据不同的用户角色（学生、教师、管理员），分配不同的权限。*</small>
        * 折叠时仅显示图标，展开时显示图标和文字
        * 当前激活的菜单项高亮显示
        * 支持多级菜单展开/收起
        * 具体菜单项见下方"第二部分：用户角色界面"

* **前端规格:**
    * 导航栏状态（如未读消息数）应通过全局状态管理（如Redux/Context API）进行维护
    * 侧边栏的折叠状态应在本地持久化（localStorage）
    * 实现响应式设计，移动端自动隐藏侧边栏

### **4. 系统设置**
* **功能描述:** 用户管理个人信息和账户安全的中心。

* **用户故事:**
    * **作为用户,** 我希望能修改我的个人资料，如姓名或学校。
    * **作为用户,** 我希望能定期修改我的登录密码以保障账户安全。

* **UI/UX 规格:**
    * **布局:** 页面包含"个人资料"、"账户安全"、"通知设置"三个标签页
        > <small>*引用来源: 学生用户界面...个人中心...个人信息管理...系统设置。*</small>
    * **个人资料:** 
        * 头像上传（支持裁剪）
        * 表单字段：姓名、学校、院系、学号/工号、联系电话、个人简介
        * 支持实时保存提示
    * **账户安全:** 
        * 修改密码功能，需要输入"当前密码"、"新密码"、"确认新密码"
        * 绑定/解绑第三方账号（微信、QQ）
        * 查看登录历史记录
    * **通知设置:**
        * 邮件通知开关（作业提醒、成绩通知、系统公告）
        * 站内信通知开关

* **后端 / API 规格:**
    * `GET /api/user/profile`: 获取当前用户的个人资料
    * `PUT /api/user/profile`: 更新用户的个人资料
    * `POST /api/user/avatar`: 上传用户头像
    * `PUT /api/user/password`: 修改用户密码
    * `GET /api/user/login-history`: 获取登录历史
    * `PUT /api/user/notification-settings`: 更新通知设置

---

## **第二部分：用户角色界面 (优先级: 极高)**
定义不同角色用户的首页仪表盘和核心功能入口。

### **1. 教师端**
* **首页仪表盘:**
    * **目标:** 让教师快速了解当前最重要的教学任务。
    * **UI布局:**
        * 顶部"统计卡片"区：
            * 待批改作业数（点击跳转批改中心）
            * 进行中课程数（点击跳转课程列表）
            * 未读消息数（点击跳转通知中心）
            * 本周新增学生数
        * 左侧"待办事项"列表：
            * 显示即将截止的作业（显示剩余时间）
            * 按截止日期升序排列
            * 支持标记完成
        * 右侧"课程进度"概览：
            * 以卡片形式展示几个活跃课程的学生平均完成度
            * 显示进度条和百分比
        * 底部"快捷操作"区：
            * 创建新课程
            * 发布新作业
            * 查看学情报告

* **侧边导航菜单:** 
    * `Dashboard` (仪表盘)
    * `我的课程` (课程管理)
    * `题库管理` (题目资源)
    * `我的班级` (班级管理)
    * `考试管理` (作业/练习)
    * `批改中心` (作业批改)
    * `学生答疑` (讨论区)
    * `学情报告` (数据分析)
    * `通知管理` (公告通知)
    * `个人设置` (账户设置)
    > <small>*引用来源: 教师用户界面包含：班级管理模块、作业管理模块、学情分析模块、资源管理模块。*</small>

### **2. 助教端**
* **首页仪表盘:**
    * **目标:** 聚焦于助教被分配的具体任务。
    * **UI布局:**
        * 顶部"统计卡片"区：
            * 待处理批改任务（带进度提示）
            * 我发布的公告数
            * 待回复的学生提问数
            * 负责班级的学生总数
        * 主区域"任务列表"：
            * 显示需要助教批改的作业列表
            * 包含课程/班级名称、截止时间、提交人数、批改进度
            * 支持按优先级排序

* **侧边导航菜单:** 
    * `Dashboard` (仪表盘)
    * `辅助教学` (教学辅助)
    * `班级管理` (学生管理)
    * `批改任务` (作业批改)
    * `学生答疑` (答疑解惑)
    * `学情报告` (数据查看)
    * `通知管理` (公告发布)
    * `个人设置` (账户设置)

### **3. 学生端**
* **首页仪表盘:**
    * **目标:** 激励学生学习，并清晰展示学习任务和成果。
    * **UI布局:**
        * 顶部"统计卡片"区：
            * 待完成作业(考试)（带倒计时）
            * 最近一次成绩（带趋势箭头）
            * 课程学习进度(%)（环形进度图）
            * 累计错题数（点击跳转错题本）
        * 左侧"我的考试"列表：
            * 显示所有"进行中"和"未开始"的考试
            * 按截止日期升序排列
            * 显示剩余时间和题目数量
        * 右侧"我的课程"区域：
            * 以卡片形式展示已报名的课程
            * 显示课程封面、名称、进度条
            * 支持快速进入学习

* **侧边导航菜单:** 
    * `Dashboard` (学习概览)
    * `我的课程` (课程学习)
    * `我的考试` (作业考试)
    * `练习中心` (自主练习)
    * `学习报告` (成绩分析)
    * `错题本` (错题回顾)
    * `讨论区` (问答交流)
    * `通知管理` (消息中心)
    * `个人设置` (账户设置)
    > <small>*引用来源: 学生用户界面包含：作业模块、学习报告模块、学习资源模块、个人中心。*</small>

### **4. 系统管理员端**
* **首页仪表盘:**
    * **目标:** 监控系统健康状况，提供管理功能的快捷入口。
    * **UI布局:**
        * 顶部"系统状态"卡片：
            * 系统运行状态(正常/告警)（带状态灯）
            * 在线用户数（实时更新）
            * 数据库连接状态
            * API平均响应时间（带趋势图）
            > <small>*引用来源: 超级管理员用户界面...系统监控模块...服务器性能监控、API 接口监控、数据库连接监控。*</small>
        * 主区域"近期活动日志"：
            * 实时滚动显示关键操作日志
            * 包含时间、操作者、操作类型、操作对象
            * 支持按级别筛选（INFO/WARN/ERROR）
            > <small>*引用来源: 超级管理员用户界面...系统监控模块...系统日志查看。*</small>
        * 快捷操作面板：
            * 用户管理（查看/新增）
            * 权限配置（角色管理）
            * 系统设置（参数配置）
            * 数据备份（一键备份）

* **侧边导航菜单:** 
    * `总览仪表盘` (系统概览)
    * `用户管理` (用户CRUD)
    * `课程管理` (课程监控)
    * `班级管理` (班级监控)
    * `权限配置` (角色权限)
    * `日志审计` (操作日志)
    * `系统监控` (性能监控)
    * `数据管理` (备份恢复)
    * `系统设置` (参数配置)
    * `个人设置` (账户设置)
    > <small>*引用来源: 超级管理员用户界面包含：用户管理模块、角色与权限管理模块、系统配置管理模块、数据管理模块、系统监控模块。*</small>

### **5. 学校管理员端**
* **首页仪表盘:**
    * **目标:** 提供校级维度的宏观教学数据概览。
    * **UI布局:**
        * 顶部"校级概览"卡片：
            * 总教师数（分类显示：教授/副教授/讲师）
            * 总学生数（分年级显示）
            * 活跃课程数（本学期）
            * 系统使用率（日活/月活）
        * 主图表区域：
            * 柱状图：各院系/年级开课数量对比
            * 饼图：学生总体成绩分布(优/良/中/差)
            * 折线图：系统使用趋势（最近30天）
        * 报表下载区：
            * 一键下载教务报表（Excel格式）
            * 自定义报表生成

* **侧边导航菜单:** 
    * `校级概览` (数据大屏)
    * `课程与用户分配` (资源调配)
    * `教师管理` (教师信息)
    * `学生管理` (学生信息)
    * `资源管理` (教学资源)
    * `通知管理` (校级公告)
    * `数据报表` (统计分析)
    * `审批管理` (申请审批)
    * `个人设置` (账户设置)

---

## **第三部分：课程管理模块 (优先级: 高)**
这是教师进行教学活动的核心模块。

### **1. 课程列表**
* **功能描述:** 教师查看和管理自己创建或参与的所有课程。

* **UI/UX 规格:**
    * 页面顶部功能区：
        * 搜索框（支持课程名称、编号搜索）
        * 筛选器：
            * 课程状态（进行中/已结束/草稿）
            * 学期（2025春/2025秋等）
            * 课程类型（必修/选修）
        * 视图切换（卡片视图/列表视图）
    * 课程展示：
        * **卡片视图:** 
            * 课程封面图
            * 课程名称和编号
            * 开课教师姓名
            * 班级数量和学生总数
            * 进度指示器
            * 操作菜单（编辑/复制/归档/删除）
        * **列表视图:**
            * 表格形式展示更多信息
            * 支持排序和批量操作
    * 右下角悬浮"创建新课程"按钮

### **2. 创建/编辑课程**
* **功能描述:** 允许教师创建新课程或修改现有课程信息。

* **UI/UX 规格:**
    * 采用步骤式表单设计：
        * **步骤1 - 基本信息:**
            * `课程名称` (必填，限100字符)
            * `课程编号` (自动生成，可修改)
            * `课程简介` (富文本编辑器，支持插入图片/视频)
            * `课程封面` (图片上传，支持拖拽，建议尺寸16:9)
            * `课程分类` (多选标签：专业课/基础课/必修/选修等)
        * **步骤2 - 教学设置:**
            * `学分` (数字输入)
            * `总学时` (数字输入)
            * `考核方式` (下拉选择：考试/考查)
            * `成绩构成` (可配置平时成绩/期中/期末占比)
        * **步骤3 - 高级选项:**
            * `复制已有课程` (搜索选择框，选择后自动填充)
            * `课程可见性` (公开/仅限邀请)
            * `开放注册` (是/否)

* **后端 / API 规格:**
    * `POST /api/courses`: 创建新课程
    * `PUT /api/courses/{courseId}`: 更新课程信息
    * `POST /api/courses/{courseId}/copy`: 复制课程（包含章节和资源）
    * `POST /api/courses/{courseId}/cover`: 上传课程封面

### **3. 课程详情 (章节与班级管理)**
* **功能描述:** 教师管理单个课程的核心界面，包括其内容结构（章节）和教学实体（班级）。

* **UI/UX 规格:**
    * **页面布局:** 左右分栏+顶部信息栏
    * **顶部信息栏:**
        * 课程名称、编号、状态
        * 快捷操作按钮：编辑信息、发布公告、查看统计
    * **左侧面板 - 章节树:**
        * 可折叠的树形结构
        * 支持拖拽调整顺序和层级
        * 每个节点显示：
            * 章节名称
            * 资源数量标记
            * 操作图标（添加子节点/编辑/删除）
        * 顶部工具栏：
            * 批量导入（支持Excel/CSV/JSON）
            * 全部展开/收起
            * 搜索框
    * **右侧主内容区:**
        * **Tab切换:** 班级管理 / 资源管理 / 课程公告
        * **班级管理Tab:**
            * 班级列表表格：
                * 列：班级名称、起止时间、学生数、助教、平均完成率、操作
                * 支持排序、筛选、导出CSV
            * 点击班级行展开详情：
                * 学生名单（支持搜索、添加/移除、批量导入）
                * 助教权限设置
                * 班级公告

### **4. 创建/删除班级**
* **功能描述:** 在一个课程下开设面向不同学生群体的班级。

* **UI/UX 规格:**
    * **创建班级 - 模态框设计:**
        * **基本信息区:**
            * `班级名称`: 自动生成（格式：2025春-线性代数-01班），可编辑
            * `班级编号`: 自动生成
            * `班级容量`: 数字输入（可选）
            * `起止时间`: 日期时间选择器
        * **学生管理区:**
            * Tab切换：手动添加 / 批量导入
            * **手动添加:** 
                * 搜索框（支持学号/姓名）
                * 已选学生列表
            * **批量导入:**
                * 文件上传区（支持拖拽）
                * 模板下载链接
                * 预览导入结果
        * **助教分配区:**
            * 搜索选择助教
            * 权限设置（见第7节）
    * **删除班级:**
        * 二次确认弹窗
        * 选项：保留数据30天 / 立即删除
        * 删除后发送通知给受影响用户

### **5. 章节资源管理**
* **功能描述:** 在特定章节下上传和管理教学资源。
    > <small>*引用来源: 教师用户界面...资源管理模块...题库管理...在线学习资源管理。*</small>

* **UI/UX 规格:**
    * **资源列表页:**
        * 顶部操作栏：
            * "+ 添加资源"下拉菜单：
                * 上传文档（PDF/DOC/DOCX/PPT）
                * 上传视频（MP4/AVI/MOV）
                * 添加外部链接
                * 创建LaTeX题目
                * 从题库导入
            * 批量操作按钮（删除/移动/复制）
            * 视图切换（列表/网格）
        * 资源展示：
            * 类型图标（自动识别）
            * 资源名称（可直接编辑）
            * 文件大小/视频时长
            * 上传者和时间
            * 下载次数
            * 操作按钮（预览/下载/编辑/删除）
    * **LaTeX题目编辑器:**
        * 左右分栏：源码编辑 / 实时预览
        * 工具栏：常用数学符号快捷插入
        * 题目属性面板：
            * 难度系数（0-1滑块，显示AI计算值和手动值）
            * 题型选择（单选/多选/填空/计算/证明）
            * 分值设置
            * 知识点标签（支持多选）
            * 预估完成时间
        * 底部操作：保存草稿 / 保存并发布 / 预览效果

    * **后端 / API 规格:**
        * `POST /api/chapters/{chapterId}/resources`: 上传资源
        * `GET /api/resources/{resourceId}`: 获取资源详情
        * `PUT /api/resources/{resourceId}`: 更新资源信息
        * `DELETE /api/resources/{resourceId}`: 删除资源（软删除）
        * `GET /api/resources/{resourceId}/difficulty`: 获取题目难度系数历史数据

### **6. 课程公告**
* **功能描述:** 教师向一个或多个班级发布通知。

* **UI/UX 规格:**
    * **公告列表页:**
        * 顶部功能区：
            * "+ 发布公告"按钮
            * 筛选器（全部/已发布/草稿）
            * 搜索框
        * 公告卡片展示：
            * 置顶标记（📌图标）
            * 标题和摘要（最多显示3行）
            * 发布时间（相对时间，如"2小时前"）
            * 目标班级标签
            * 阅读统计（已读/总人数）
            * 操作菜单（编辑/置顶/撤回/删除）
    * **发布/编辑公告:**
        * **模态框设计:**
            * `公告标题` (必填，限50字符)
            * `公告内容` (富文本编辑器，支持：
                * 文字格式化
                * 插入图片/视频
                * 插入附件
                * @提及用户
                * 插入链接）
            * `发布范围`:
                * 全部班级（一键选择）
                * 指定班级（多选列表）
            * `发布选项`:
                * 立即发布 / 定时发布
                * 同时发送邮件通知
                * 设为重要（推送通知）

### **7. 助教权限控制**
* **功能描述:** 教师在为班级分配助教时，可以精细化控制其权限。

* **UI/UX 规格:**
    * **权限设置界面:**
        * 采用权限矩阵设计：
            ```
            权限项                    查看  创建  编辑  删除
            ─────────────────────────────────────────────
            班级学生管理               ✓     ✓     ✓     ✓
            作业批改与分数修正         ✓     -     ✓     -
            班级公告管理               ✓     ✓     ✓     ✓*
            课程资源管理               ✓     ✓     ✓*    ✓*
            学情数据查看               ✓     -     -     -
            讨论区管理                 ✓     -     ✓     ✓
            
            * 仅限自己创建的内容
            ```
        * 预设权限模板：
            * 完全权限（除课程设置外的所有权限）
            * 批改助教（仅批改和学生管理）
            * 答疑助教（仅讨论区和公告）
        * 权限生效范围：仅限被分配的班级

* **后端 / API 规格:**
    * 实现基于RBAC的权限控制系统
    * 每个API请求需通过权限中间件验证
    * 权限缓存机制，避免频繁数据库查询

### **8. 作业批改与审核**
* **功能描述:** 教师和助教对学生提交的考试（作业）进行批改和审核。
    > <small>*引用来源: 教师用户界面...作业管理模块...作业批改结果查看和审核。*</small>

* **UI/UX 规格:**
    * **批改中心主界面:**
        * **左侧边栏 - 作业列表:**
            * 分组显示：
                * 🔴 待批改（显示数量）
                * 🟡 批改中（显示进度）
                * 🟢 已完成
            * 作业卡片信息：
                * 作业名称
                * 所属班级
                * 截止时间（倒计时）
                * 提交情况（已交/总数）
                * 批改进度条
        * **右侧主区域 - 批改界面:**
            * **顶部信息栏:**
                * 当前学生信息（姓名、学号、头像）
                * 切换学生（上一个/下一个）
                * 批改进度（5/30）
            * **批改内容区（左右分栏）:**
                * **左栏 - 题目与答案:**
                    * 题目内容（LaTeX渲染）
                    * 标准答案
                    * 学生答案（支持查看原始手写图片）
                    * 答题步骤展示
                * **右栏 - AI批改结果:**
                    * AI建议分数（可调整的滑块）
                    * AI识别的错误点（高亮标注）
                    * AI生成的评语（可编辑的富文本）
                    * 常用批注快捷语（可自定义）
                    * 历史批改记录（其他题目的批改情况）
            * **底部操作栏:**
                * 保存草稿
                * 确认批改（自动跳转下一题）
                * 批量操作（给剩余题目相同分数）

* **批改辅助功能:**
    * **智能批改建议:**
        * 相似答案检测（检测抄袭）
        * 步骤完整性检查
        * 常见错误模式识别
    * **批改模板:**
        * 保存常用评语
        * 快速插入数学符号
    * **批量导出:**
        * 导出格式：Excel/PDF/CSV
        * 包含内容：成绩单、详细批改记录、错题分析

### **9. 课程统计与分析**
* **功能描述:** 为教师提供班级和学生的学情数据可视化分析。
    > <small>*引用来源: 教师用户界面...学情分析模块...班级整体学情报告...学生个体学情报告。*</small>

* **UI/UX 规格:**
    * **数据筛选区:**
        * 班级选择（支持多选对比）
        * 时间范围（本周/本月/本学期/自定义）
        * 章节选择（支持多选）
    * **统计概览（数据卡片）:**
        * 平均分（带趋势箭头）
        * 及格率（环形图）
        * 最高分/最低分
        * 提交率
        * 平均用时
    * **图表分析区:**
        * **成绩分布图:**
            * 直方图展示分数段分布
            * 正态分布曲线叠加
            * 支持切换不同维度（按章节/按题型）
        * **知识点掌握雷达图:**
            * 展示各知识点平均得分率
            * 支持班级对比视图
        * **学习进度热力图:**
            * 时间轴展示学生学习活跃度
            * 颜色深浅表示学习强度
    * **详细数据表格:**
        * 学生成绩明细表：
            * 列：学号、姓名、各章节得分、总分、排名
            * 支持多维度排序
            * 单元格颜色编码（优秀/良好/及格/不及格）
            * 点击学生查看个人详细报告
        * 导出功能：
            * 一键生成分析报告（Word/PDF）
            * 导出原始数据（Excel）

* **后端 / API 规格:**
    * `GET /api/analytics/course/{courseId}/overview`: 获取课程统计概览
    * `GET /api/analytics/course/{courseId}/distribution`: 获取成绩分布数据
    * `GET /api/analytics/course/{courseId}/knowledge-points`: 获取知识点掌握情况
    * `GET /api/analytics/student/{studentId}/report`: 生成学生个人报告

### **10. 课程讨论区**
* **功能描述:** 为每个知识点提供一个BBS式的讨论区，方便师生互动。

* **UI/UX 规格:**
    * **讨论区主页:**
        * **顶部功能区:**
            * 发帖按钮（醒目的主色调）
            * 搜索框（支持标题/内容/作者）
            * 筛选器：
                * 知识点标签
                * 帖子类型（提问/分享/讨论）
                * 排序方式（最新回复/最多回复/最多点赞）
        * **帖子列表:**
            * 列表项展示：
                * 类型图标（❓提问 💡分享 💬讨论）
                * 标题（支持LaTeX公式预览）
                * 作者信息（头像、姓名、角色标签）
                * 统计信息（回复数、查看数、点赞数）
                * 最后回复时间和回复者
                * 知识点标签
            * 置顶帖子特殊样式显示
    * **帖子详情页:**
        * **主帖展示:**
            * 完整内容（支持富文本、代码、LaTeX）
            * 附件下载
            * 操作按钮（点赞、收藏、举报）
        * **回复区:**
            * 支持盖楼式回复
            * 支持@提及
            * 支持引用回复
            * 最佳答案标记（教师可设置）
        * **快速回复框:**
            * 富文本编辑器
            * 支持上传图片/附件
            * 预览功能

---

## **第四部分：题库管理模块 (优先级: 高)**
系统内容的核心，所有考试和练习的基础。

### **1. 题库总览**
* **功能描述:** 提供题目的集中管理和快速检索。

* **UI/UX 规格:**
    * **页面布局:**
        * 左侧：知识点树形导航
        * 右侧：题目列表和操作区
    * **筛选和搜索:**
        * 高级搜索（题目内容/题号/创建者）
        * 多维筛选器：
            * 题型（单选/多选/填空/计算/证明）
            * 难度（简单/中等/困难）
            * 使用频率（高频/中频/低频）
            * 创建时间
            * 审核状态

### **2. OCR 扫描与核对页面**
* **功能描述:** 将上传的文档通过OCR技术转化为结构化的LaTeX题目。
    > <small>*引用来源: 从PDF/DOC/DOCX文件中提取文本、表格、图片等内容并转换为LaTeX格式。*</small>

* **UI/UX 规格:**
    * **OCR处理流程:**
        1. **文档上传:** 拖拽上传区，支持批量上传
        2. **预处理:** 显示处理进度，预览页面切割效果
        3. **题目识别:** AI自动识别题目边界和结构
        4. **人工核对:** 三栏式界面
    * **核对界面详细设计:**
        * **顶部工具栏:**
            * 题目来源输入框
            * 保存进度指示器
            * 快捷键提示
        * **左栏 - 原始图像:**
            * 支持缩放和拖动
            * 题目区域高亮框（可调整）
            * 图片增强工具（对比度/亮度）
        * **中栏 - LaTeX编辑器:**
            * 语法高亮
            * 自动补全
            * 错误提示
            * 公式模板库
        * **右栏 - 渲染预览:**
            * 实时更新
            * 显示效果切换（Web/打印）
        * **底部属性区:**
            * 题型选择
            * 难度设置
            * 知识点关联（AI推荐+手动调整）
            * 答案输入
            * 解析编辑

* **后端 / API 规格:**
    * `POST /api/ocr/upload`: 上传文档进行OCR
    * `GET /api/ocr/status/{taskId}`: 查询OCR处理状态
    * `GET /api/ocr/results/{taskId}`: 获取OCR识别结果
    * `PUT /api/ocr/questions/{questionId}`: 保存核对后的题目

### **3. 主观题改编为选择题**
* **功能描述:** 利用LLM将主观题自动改编为客观题。
    > <small>*引用来源: 系统应能够将填空题、计算题、解答题、证明题及其解答过程转化为不定项选择题。*</small>

* **UI/UX 规格:**
    * **改编流程:**
        1. 选择源题目
        2. AI生成选项
        3. 人工审核调整
        4. 保存新题目
    * **改编界面:**
        * **源题目展示区:**
            * 题目内容
            * 标准答案
            * 详细解析
        * **AI生成结果区:**
            * 生成的题干（可编辑）
            * 选项列表（至少5个）：
                * 选项内容编辑
                * 正确答案标记
                * 干扰项说明
            * 新题目解析
            * 难度系数建议
        * **预览对比区:**
            * 原题 vs 新题并排显示
            * 改编说明记录

### **4. 题目手工维护**
* **功能描述:** 提供完整的题目增删改查功能。

* **UI/UX 规格:**
    * **题目编辑器:**
        * **基本信息:**
            * 题目编号（自动生成）
            * 题目来源
            * 创建/修改时间
            * 版本历史
        * **题目内容编辑:**
            * LaTeX编辑器（全功能）
            * 图片上传和管理
            * 公式编辑器（可视化）
        * **答案与解析:**
            * 标准答案设置
            * 评分标准（针对主观题）
            * 详细解析编辑
            * 易错点提示
        * **属性设置:**
            * 题型和难度
            * 知识点标签
            * 考察能力点
            * 建议用时
    * **批量操作:**
        * 批量导入（Excel模板）
        * 批量修改属性
        * 批量删除（需审核）

---

## **第五部分：考试管理模块 (优先级: 高)**
将题库中的题目组织成可供学生完成的练习或作业。

### **1. 考试列表**
* **功能描述:** 集中管理所有考试/作业。

* **UI/UX 规格:**
    * **列表展示:**
        * 卡片式布局，每个考试显示：
            * 考试名称和类型图标
            * 关联课程和班级
            * 时间信息（开始/结束/剩余时间）
            * 参与情况（已交/应交）
            * 状态标签（未开始/进行中/已结束/批改中）
            * 快捷操作按钮
    * **状态指示器:**
        * 🟢 进行中（带倒计时）
        * 🔵 未开始（显示开始时间）
        * ⚫ 已结束（显示完成率）
        * 🟡 批改中（显示进度）

### **2. 创建/编辑考试**
* **功能描述:** 教师设计和配置考试。

* **UI/UX 规格:**
    * **创建向导（分步骤）:**
        * **步骤1 - 基本设置:**
            * 考试名称
            * 考试类型（练习/作业/测验/考试）
            * 关联知识点（从章节树选择）
            * 目标班级（多选）
            * 考试时间设置：
                * 开始时间（可选，空则立即开始）
                * 结束时间（必填）
                * 限时设置（可选，如90分钟）
        * **步骤2 - 智能组卷:**
            * **公共题目区 ($N_c$):**
                * 手动选题（从题库浏览选择）
                * 智能推荐（设置条件，AI推荐）
                * 已选题目预览和调整
            * **个性化题目区 ($N_p$):**
                * 设置题目数量
                * 选择生成策略：
                    * 随机抽取（设置难度范围）
                    * 错题优先（基于学生历史）
                    * 薄弱点针对（基于知识图谱）
                    * 分层设置（不同水平不同题）
        * **步骤3 - 高级设置:**
            * 题目顺序（固定/随机）
            * 选项顺序（固定/随机）
            * 防作弊设置（切屏检测/摄像头监控）
            * 成绩发布设置（立即/手动）

* **组卷辅助工具:**
    * 试卷难度分析（图表展示）
    * 知识点覆盖度检查
    * 预估完成时间
    * 历史试卷模板

### **3. 考试预览与监考**
* **功能描述:** 教师预览试卷和实时监控考试。

* **UI/UX 规格:**
    * **预览模式:**
        * 模拟学生视角查看
        * 快速跳转题目
        * 导出为PDF
    * **监考面板:**
        * **实时数据看板:**
            * 在线人数
            * 提交进度
            * 平均用时
            * 异常行为警告
        * **学生列表:**
            * 状态指示（未开始/答题中/已提交）
            * 答题进度条
            * 切屏次数
            * 强制收卷操作

### **4. 考生答题界面**
* **功能描述:** 学生进行考试答题。

* **UI/UX 规格:**
    * **界面布局:**
        * **顶部固定栏:**
            * 考试名称
            * 倒计时器（醒目显示）
            * 自动保存提示
        * **左侧题目导航:**
            * 题号列表（标记已答/未答/标记）
            * 快速定位
            * 答题卡预览
        * **中间答题区:**
            * 题目展示（支持LaTeX渲染）
            * 答题输入：
                * 选择题（单选/多选）
                * 填空题（文本输入）
                * 主观题（富文本编辑器）
                * 手写输入（平板支持）
            * 草稿纸功能
        * **右侧工具栏:**
            * 计算器
            * 公式参考
            * 标记功能
    * **交卷流程:**
        * 检查提示（未答题目警告）
        * 确认对话框
        * 提交成功页面

---

## **第六部分：自动批改与人工修订 (优先级: 中高)**

### **1. 自动批改引擎**
* **功能描述:** AI驱动的作业自动批改系统。
    > <small>*引用来源: 系统能够利用 AI 技术自动批改学生提交的数学作业，并提供详细的批改结果...*</small>

* **技术实现:**
    * **客观题批改:**
        * 答案精确匹配
        * 部分分数计算
    * **主观题批改:**
        * 步骤识别和分析
        * 关键点提取
        * 过程分评分
        * 错误类型分类

* **批改结果数据结构:**
    ```json
    {
      "questionId": "Q001",
      "studentAnswer": "...",
      "score": 85,
      "maxScore": 100,
      "details": {
        "steps": [
          {
            "content": "步骤1内容",
            "score": 20,
            "correct": true,
            "comment": "正确"
          }
        ],
        "errors": [
          {
            "type": "计算错误",
            "location": "第3步",
            "suggestion": "请检查运算"
          }
        ]
      },
      "aiComment": "整体思路正确，但在计算过程中出现错误...",
      "confidence": 0.92
    }
    ```

### **2. 批改结果汇总看板**
* **功能描述:** 为教师提供班级作业批改的整体概览。

* **UI/UX 规格:**
    * **统计概览:**
        * 批改完成率（进度条）
        * 平均分分布（柱状图）
        * 及格率（饼图）
        * 高频错题TOP5
    * **详细列表:**
        * 学生成绩表（可排序）
        * 批量操作（导出/打印）
        * 快速跳转到个人批改

### **3. 人工修订工作台**
* **功能描述:** 教师审核和调整AI批改结果。
    > <small>*引用来源: 系统应支持教师审核和修改 AI 批改结果。*</small>

* **UI/UX 规格:**
    * **修订界面:**
        * AI批改结果展示
        * 分数调整滑块
        * 批注工具：
            * 文字批注
            * 画笔标记
            * 语音评论
        * 评语模板库
    * **批量处理:**
        * 相似答案归类
        * 统一调整分数
        * 批量添加评语

---

## **第七部分：学习报告与评估 (优先级: 中)**

### **1. 学生个人学习报告**
* **功能描述:** 为学生提供个性化的学习分析。
    > <small>*引用来源: 系统利用 AI 技术，结合学生的学习数据，对学生的数学知识掌握程度进行精准评估...*</small>

* **报告内容:**
    * **学习概览:**
        * 学习时长统计
        * 完成进度
        * 成绩趋势图
    * **知识掌握分析:**
        * 知识点雷达图
        * 强弱项对比
        * 进步曲线
    * **错题分析:**
        * 错题分类统计
        * 高频错误类型
        * 改进建议
    * **个性化建议:**
        * 推荐学习路径
        * 重点复习内容
        * 练习题推荐

### **2. 班级学情报告**
* **功能描述:** 为教师提供班级整体学习情况分析。
    > <small>*引用来源: 教师用户界面...学情分析模块...班级整体学情报告 (班级知识点掌握情况、错误类型分布等)。*</small>

* **报告内容:**
    * **班级概况:**
        * 整体成绩分布
        * 学习活跃度
        * 进度完成率
    * **对比分析:**
        * 班级间对比
        * 历史趋势对比
        * 知识点掌握对比
    * **教学建议:**
        * 薄弱知识点提示
        * 教学重点建议
        * 分层教学方案

### **3. 学习路径推荐**
* **功能描述:** 基于学生学习数据的个性化推荐。

* **推荐维度:**
    * **知识路径:**
        * 前置知识补充
        * 进阶内容推荐
        * 横向拓展建议
    * **练习推荐:**
        * 巩固练习
        * 提升练习
        * 综合应用
    * **资源推荐:**
        * 视频课程
        * 参考资料
        * 拓展阅读

---

## **第八部分：数据导出模块 (优先级: 中)**

### **1. 数据导出中心**
* **功能描述:** 统一的数据导出管理。
    > <small>*引用来源: 超级管理员用户界面...数据管理模块...数据导出。*</small>

* **支持的导出类型:**
    * **成绩数据:**
        * 学生成绩单
        * 班级成绩汇总
        * 成绩分析报告
    * **学习数据:**
        * 学习记录明细
        * 答题记录
        * 错题集
    * **统计报表:**
        * 教学统计报表
        * 学情分析报表
        * 使用情况报表

* **导出格式:**
    * Excel（.xlsx）
    * PDF（带样式）
    * CSV（原始数据）
    * Word（报告模板）

### **2. API文档中心**
* **功能描述:** 为开发者提供API接口文档。

* **文档内容:**
    * **接口列表:**
        * RESTful API规范
        * 请求/响应示例
        * 错误码说明
    * **认证说明:**
        * JWT token获取
        * 权限说明
    * **SDK下载:**
        * Java SDK
        * Python SDK
        * JavaScript SDK

---

## **第九部分：学生学习模块 (优先级: 中高)**

### **1. 我的课程**
* **功能描述:** 学生查看和学习已报名课程。

* **UI/UX 规格:**
    * **课程卡片:**
        * 课程封面和名称
        * 学习进度环
        * 最近学习时间
        * 待完成任务数
    * **课程详情页:**
        * 章节目录（树形结构）
        * 学习记录（时间轴）
        * 资源列表
        * 讨论区入口

### **2. 练习中心**
* **功能描述:** 学生自主练习平台。

* **练习模式:**
    * **章节练习:**
        * 按知识点选择
        * 难度自适应
        * 即时反馈
    * **错题重练:**
        * 错题自动收集
        * 按错误类型分类
        * 智能推荐相似题目
        * 掌握度追踪
    * **模拟考试:**
        * 仿真考试环境
        * 限时练习
        * 成绩预测
        * 薄弱点分析
    * **每日一练:**
        * 个性化推荐
        * 连续签到奖励
        * 学习打卡记录

* **UI/UX 规格:**
    * **练习选择页:**
        * 练习类型卡片
        * 推荐练习轮播
        * 学习统计概览
    * **练习界面:**
        * 简洁的答题界面
        * 实时提示功能
        * 草稿纸工具
        * 收藏功能

### **3. 错题本**
* **功能描述:** 智能错题管理和复习系统。

* **UI/UX 规格:**
    * **错题分类:**
        * 按知识点分类
        * 按错误类型分类
        * 按时间分类
        * 按掌握程度分类
    * **错题卡片:**
        * 题目内容预览
        * 错误答案记录
        * 正确答案展示
        * 错误原因分析
        * 复习次数统计
        * 掌握状态标记
    * **复习功能:**
        * 智能复习提醒
        * 艾宾浩斯遗忘曲线
        * 复习效果追踪

### **4. 学习进度跟踪**
* **功能描述:** 可视化学习进度和成就。

* **进度展示:**
    * **总体进度:**
        * 课程完成度
        * 章节掌握情况
        * 学习时长统计
    * **成就系统:**
        * 学习徽章
        * 连续学习天数
        * 答题正确率里程碑
        * 知识点掌握认证

---

## **第十部分：通知与消息系统 (优先级: 中)**

### **1. 通知中心**
* **功能描述:** 统一的消息通知管理。

* **通知类型:**
    * **系统通知:**
        * 作业发布提醒
        * 成绩公布通知
        * 系统维护公告
    * **课程通知:**
        * 课程公告
        * 作业截止提醒
        * 讨论区回复
    * **个人通知:**
        * 学习提醒
        * 错题复习提醒
        * 成就获得通知

* **UI/UX 规格:**
    * **通知列表:**
        * 按时间倒序排列
        * 未读标记（红点）
        * 通知类型图标
        * 快速操作（标记已读/删除）
    * **通知详情:**
        * 完整内容展示
        * 相关链接跳转
        * 操作按钮

### **2. 邮件通知系统**
* **功能描述:** 重要通知的邮件推送。

* **邮件模板:**
    * 作业截止提醒
    * 成绩发布通知
    * 系统重要公告
    * 密码重置邮件

* **发送策略:**
    * 即时发送（重要通知）
    * 定时发送（每日汇总）
    * 用户偏好设置

---

## **第十一部分：移动端适配 (优先级: 中)**

### **1. 响应式设计**
* **功能描述:** 确保在各种设备上的良好体验。

* **设计原则:**
    * **移动优先:** 从小屏幕开始设计
    * **渐进增强:** 大屏幕添加更多功能
    * **触摸友好:** 按钮大小适合手指操作
    * **性能优化:** 减少加载时间

* **适配要点:**
    * **导航适配:**
        * 汉堡菜单
        * 底部导航栏
        * 手势操作
    * **表单优化:**
        * 输入框自动聚焦
        * 虚拟键盘适配
        * 输入验证提示
    * **内容展示:**
        * 卡片式布局
        * 无限滚动
        * 下拉刷新

### **2. 离线功能**
* **功能描述:** 支持部分离线使用。

* **离线能力:**
    * 已下载的课程资源
    * 练习题缓存
    * 答题记录本地保存
    * 网络恢复后同步

---

## **第十二部分：系统管理功能 (优先级: 中低)**

### **1. 用户管理**
* **功能描述:** 系统用户的全生命周期管理。
    > <small>*引用来源: 超级管理员用户界面包含：用户管理模块、角色与权限管理模块、系统配置管理模块、数据管理模块、系统监控模块。*</small>

* **用户操作:**
    * **用户CRUD:**
        * 批量导入用户
        * 用户信息编辑
        * 账号状态管理
        * 密码重置
    * **角色管理:**
        * 角色定义
        * 权限分配
        * 角色继承

### **2. 系统监控**
* **功能描述:** 实时监控系统运行状态。
    > <small>*引用来源: 超级管理员用户界面...系统监控模块...服务器性能监控、API 接口监控、数据库连接监控。*</small>

* **监控指标:**
    * **性能监控:**
        * CPU使用率
        * 内存使用率
        * 磁盘空间
        * 网络流量
    * **业务监控:**
        * 在线用户数
        * API响应时间
        * 错误率统计
        * 数据库性能

### **3. 日志审计**
* **功能描述:** 记录和分析系统操作日志。
    > <small>*引用来源: 超级管理员用户界面...系统监控模块...系统日志查看。*</small>

* **日志类型:**
    * **操作日志:**
        * 用户登录记录
        * 关键操作记录
        * 权限变更记录
    * **系统日志:**
        * 错误日志
        * 性能日志
        * 安全日志

---

## **第十三部分：安全与权限 (优先级: 高)**

### **1. 安全架构**
* **功能描述:** 确保系统和数据安全。

* **安全措施:**
    * **身份认证:**
        * JWT令牌机制
        * 多因素认证（可选）
        * 单点登录（SSO）支持
    * **权限控制:**
        * RBAC权限模型
        * 资源级权限控制
        * API权限验证
    * **数据安全:**
        * 数据加密存储
        * 传输层加密（HTTPS）
        * 敏感信息脱敏

### **2. 防作弊机制**
* **功能描述:** 在线考试防作弊技术。

* **技术手段:**
    * **行为监控:**
        * 切屏检测
        * 鼠标轨迹分析
        * 答题时间分析
    * **环境检测:**
        * 摄像头监控（可选）
        * 屏幕录制检测
        * 多设备登录检测
    * **内容保护:**
        * 题目加密传输
        * 防截图水印
        * 答案随机化

---

## **第十四部分：性能优化 (优先级: 中)**

### **1. 前端优化**
* **优化策略:**
    * **代码分割:**
        * 路由级代码分割
        * 组件懒加载
        * 第三方库按需加载
    * **缓存策略:**
        * 浏览器缓存
        * CDN加速
        * Service Worker
    * **渲染优化:**
        * 虚拟滚动
        * 图片懒加载
        * 防抖节流

### **2. 后端优化**
* **优化策略:**
    * **数据库优化:**
        * 索引优化
        * 查询优化
        * 连接池管理
    * **缓存机制:**
        * Redis缓存
        * 应用级缓存
        * 分布式缓存
    * **并发处理:**
        * 异步处理
        * 消息队列
        * 负载均衡

---

## **第十五部分：测试与部署 (优先级: 中)**

### **1. 测试策略**
* **测试类型:**
    * **单元测试:**
        * 组件测试
        * 工具函数测试
        * API接口测试
    * **集成测试:**
        * 模块集成测试
        * 系统集成测试
        * 第三方服务集成测试
    * **端到端测试:**
        * 用户流程测试
        * 跨浏览器测试
        * 性能测试

### **2. 部署方案**
* **部署架构:**
    * **容器化部署:**
        * Docker容器
        * Kubernetes编排
        * 微服务架构
    * **CI/CD流水线:**
        * 自动化构建
        * 自动化测试
        * 自动化部署
    * **监控运维:**
        * 应用监控
        * 日志收集
        * 告警机制

---

## **附录A：开发优先级总结**

### **极高优先级（MVP必需）:**
1. 用户认证系统（登录/注册/权限）
2. 基础UI框架（导航/布局）
3. 课程管理核心功能
4. 题库基础功能
5. 考试创建和答题

### **高优先级（核心功能）:**
1. OCR题目识别
2. AI自动批改
3. 学情分析报告
4. 班级管理
5. 资源管理

### **中优先级（增强功能）:**
1. 高级统计分析
2. 移动端适配
3. 通知系统
4. 数据导出
5. 讨论区

### **低优先级（扩展功能）:**
1. LEAN集成
2. 高级防作弊
3. 第三方集成
4. 高级报表
5. API开放平台

---

## **附录B：技术栈建议**

### **前端技术栈:**
- **框架:** React 18+ with TypeScript
- **UI库:** Ant Design / Material-UI
- **状态管理:** Redux Toolkit / Zustand
- **路由:** React Router v6
- **构建工具:** Vite / Create React App
- **样式:** Styled-components / CSS Modules
- **图表:** ECharts / Chart.js
- **数学渲染:** MathJax / KaTeX

### **后端技术栈:**
- **框架:** Spring Boot 3.0+
- **语言:** Java 17+
- **数据库:** MySQL 8.0+ / PostgreSQL 14+
- **缓存:** Redis 6+
- **消息队列:** RabbitMQ / Apache Kafka
- **文件存储:** MinIO / 阿里云OSS
- **搜索引擎:** Elasticsearch
- **API文档:** Swagger / OpenAPI 3.0

### **DevOps技术栈:**
- **容器化:** Docker + Docker Compose
- **编排:** Kubernetes
- **CI/CD:** Jenkins / GitLab CI / GitHub Actions
- **监控:** Prometheus + Grafana
- **日志:** ELK Stack (Elasticsearch + Logstash + Kibana)
- **负载均衡:** Nginx / HAProxy

---

## **附录C：数据库设计要点**

### **核心表结构:**
```sql
-- 用户表
users (id, username, email, password_hash, role, school, created_at)

-- 课程表
courses (id, name, code, description, cover_image, creator_id, created_at)

-- 班级表
classes (id, course_id, name, start_time, end_time, capacity, created_at)

-- 题目表
questions (id, content, type, difficulty, knowledge_points, answer, created_at)

-- 考试表
exams (id, name, course_id, class_id, start_time, end_time, duration, created_at)

-- 学生答案表
student_answers (id, exam_id, student_id, question_id, answer, score, created_at)

-- 批改记录表
grading_records (id, answer_id, grader_id, ai_score, final_score, comments, created_at)
```

### **索引建议:**
- 用户表：email, username唯一索引
- 课程表：creator_id, created_at复合索引
- 题目表：knowledge_points, difficulty复合索引
- 答案表：exam_id, student_id复合索引

---

## **附录D：API设计规范**

### **RESTful API设计原则:**
- 使用HTTP动词表示操作（GET/POST/PUT/DELETE）
- 使用名词表示资源
- 统一的响应格式
- 合理的HTTP状态码
- 版本控制（/api/v1/）

### **通用响应格式:**
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": "2025-07-20T10:55:00Z"
}
```

### **错误响应格式:**
```json
{
  "code": 400,
  "message": "参数错误",
  "errors": [
    {
      "field": "email",
      "message": "邮箱格式不正确"
    }
  ],
  "timestamp": "2025-07-20T10:55:00Z"
}
```

---

## **结语**

本文档为"数学个性化学习与评估系统"提供了全面的开发需求说明。开发团队应当：

1. **严格按照优先级进行开发**，确保核心功能优先实现
2. **保持术语一致性**，避免混淆和歧义
3. **注重用户体验**，确保界面友好、操作流畅
4. **考虑系统扩展性**，为未来功能迭代预留空间
5. **重视安全性**，确保用户数据和系统安全

开发过程中如有疑问，应及时与产品经理和设计师沟通，确保最终产品符合用户需求和设计预期。

**文档版本:** 1.1  
**最后更新:** 2025年7月20日  
**状态:** 待开发团队确认